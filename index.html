<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birds Birds Birds</title>
    <link rel="icon" type="image/png" href="birdsbirdsbirdsFavicon.png">
    <link rel="preload" as="image" href="assets/images/ui/background.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Cormorant:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=EB+Garamond:wght@400;500;600;700&family=Geist:wght@100..900&family=Geist+Mono:wght@100..900&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Cormorant:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=EB+Garamond:wght@400;500;600;700&family=Geist:wght@100..900&family=Geist+Mono:wght@100..900&display=swap');
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'caveat': ['Caveat', 'cursive'],
                        'geist-mono': ['"Geist Mono"', 'monospace']
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Mobile Warning Overlay -->
    <div id="mobileWarning" style="display: none;">
        <div class="mobile-warning-content">
            <div class="mobile-warning-icon">üê¶</div>
            <h1 class="mobile-warning-title">Desktop Only</h1>
            <p class="mobile-warning-text">This game is best experienced on desktop</p>
        </div>
    </div>

    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <!-- Right Panel for Bird Notebook -->
        <button id="closedNotebook" class="closed-notebook button-hidden" aria-label="Open bird journal">
        </button>
        <div id="birdNotebook">
            <div class="notebook-content">
                <!-- Left Panel: Multi-page scrollable container -->
                <div class="notebook-left-panel">
                    <!-- Scroll Container for Pages -->
                    <div class="left-panel-scroll-container">
                        <!-- Page 1: Training Section (default) -->
                        <div class="left-panel-page training-page" data-page="1">
                            <div class="training-content">
                                <div class="training-header">
                                    <div id="poemTitle" class="training-title">How to spot birds</div>
                                    <div class="training-divider"></div>
                                </div>
                                <div class="training-tips">
                                    <div class="tip-item">
                                        <div class="tip-title">Observe Silhouette</div>
                                        <div class="tip-description">size, shape, bill, tail, wings</div>
                                    </div>
                                    <div class="tip-divider"></div>
                                    <div class="tip-item">
                                        <div class="tip-title">Notice color pattern</div>
                                        <div class="tip-description">wingbars, eye rings, legs</div>
                                    </div>
                                    <div class="tip-divider"></div>
                                    <div class="tip-item">
                                        <div class="tip-title">Click them</div>
                                        <div class="tip-description">and add them to your journal</div>
                                    </div>
                                </div>
                            </div>
                            <div class="training-hawk-image">
                                <img id="poemHawkImage" src="hawk.png" alt="Hawk illustration" />
                            </div>
                        </div>
                        
                        <!-- Page 2: Bird Info Page (shown when bird is selected) -->
                        <div class="left-panel-page bird-info-page" data-page="2" style="display: none;">
                            <div class="bird-info-content">
                                <div class="bird-image-container">
                                    <img id="birdImage" src="assets/images/notebook/Flamingoimage.png" alt="Bird illustration" style="display: none;" />
                                    <div class="bird-label">
                                        <div id="birdName" class="bird-name">GLOSSY IBIS.</div>
                                        <div id="birdScientificName" class="bird-scientific-name">Ibis Falcinellus</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Page 3: Poem Page (shown when scrolling down) -->
                        <div class="left-panel-page poem-page" data-page="3" style="display: none;">
                            <div class="poem-content">
                                <div class="poem-header">
                                    <div id="poemTitleDisplay" class="poem-title"></div>
                                    <div id="poemAuthorDisplay" class="poem-author"></div>
                                </div>
                                <div class="poem-text-container">
                                    <div id="poemTextDisplay" class="poem-text"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Scroll indicator dots -->
                    <div class="scroll-indicator-dots" style="display: none;">
                        <div class="scroll-dot active" data-page="2"></div>
                        <div class="scroll-dot" data-page="3"></div>
                    </div>

                    <!-- Hidden elements for JavaScript compatibility -->
                    <div id="poemAuthor" style="display: none;"></div>
                    <div id="poemText" style="display: none;"></div>
                </div>

                <!-- Right Panel: Species List -->
                <div class="notebook-right-panel">
                    <div class="species-info">
                        <div class="notebook-header">
                            <div class="header-row">
                                <div id="notebookDate" class="notebook-date">9/28/25</div>
                                <button id="notebookCloseBtn" class="notebook-close-btn" aria-label="Close notebook">√ó</button>
                            </div>
                        </div>
                        <div id="notebookSpeciesList" class="notebook-species-list">
                        </div>
                    </div>
                </div>

            </div>
        </div>

        
        <div id="ui" data-layer="scoreboard" class="w-96 px-0.5 bg-orange-100 rounded-lg shadow-[inset_2px_0px_2px_0px_rgba(123,123,123,0.10)] inline-flex justify-center items-center overflow-hidden">
            <div data-layer="Frame 37" class="flex-1 pl-3 pr-2.5 pt-3 pb-2 bg-orange-100 inline-flex flex-col justify-start items-start">
                <div data-layer="Description" class="justify-start text-stone-900 text-sm font-normal font-['Geist_Mono']">SCORE</div>
                <div data-layer="Description" class="justify-start text-slate-700 text-xl font-bold font-['Caveat']"><span id="scoreDisplay">0</span></div>
            </div>
            <div data-layer="Frame 40" class="w-px self-stretch relative bg-stone-200"></div>
            <div data-layer="Frame 36" class="flex-1 pl-3 pr-2.5 pt-3 pb-2 bg-orange-100 inline-flex flex-col justify-start items-start">
                <div data-layer="Description" class="justify-start text-stone-900 text-sm font-normal font-['Geist_Mono']">BIRDS</div>
                <div data-layer="Description" class="justify-start text-slate-700 text-xl font-bold font-['Caveat']"><span id="birdCount">0</span></div>
            </div>
            <div data-layer="Frame 39" class="w-px self-stretch relative bg-stone-200"></div>
            <div data-layer="Frame 35" class="flex-1 px-3 pt-3 pb-2 bg-orange-100 inline-flex flex-col justify-start items-start">
                <div data-layer="Description" class="justify-start text-stone-900 text-sm font-normal font-['Geist_Mono']">SPECIES</div>
                <div data-layer="Description" class="justify-start text-slate-700 text-xl font-bold font-['Caveat']"><span id="mousePos">0/17</span></div>
            </div>
        </div>

        <!-- Quiz Mode Toggle -->
        <div id="quizModeToggle" class="quiz-tab">
            <span class="quiz-label">Quiz</span>
            <label class="quiz-switch">
                <input type="checkbox" id="quizModeCheckbox">
                <span class="quiz-slider"></span>
                <span class="quiz-status-text" id="quizModeStatus">ON</span>
            </label>
        </div>

        <!-- Bird Identification Modal (OLD - HIDDEN) -->
        <div id="identificationModal" class="modal-overlay" style="display: none;">
            <div class="identification-container">
                <div class="binocular-circle">
                    <canvas id="identificationCanvas"></canvas>
                </div>
                <div class="identification-prompt">
                    <div class="prompt-text">Type to identify</div>
                    <input type="text" id="birdNameInput" placeholder="Type the bird's name..." autocomplete="off">
                    <button id="submitGuessBtn" class="submit-btn">Submit Guess</button>
                    <div class="feedback-message" id="feedbackMessage"></div>
                </div>
            </div>
        </div>

        <!-- Quiz Tracking Circle (NEW) -->
        <canvas id="trackingCircleCanvas" style="display: none;"></canvas>

        <!-- Bottom Identification Input (NEW) -->
        <div id="bottomIdentificationInput" class="bottom-id-input" style="display: none;">
            <div class="bottom-id-content">
                <div class="bottom-id-prompt">What bird is this?</div>
                <div class="bottom-id-controls">
                    <input type="text" id="bottomBirdNameInput" placeholder="Use full bird name" autocomplete="off">
                    <button id="bottomSubmitBtn" class="bottom-submit-btn">
                        <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4.375 10.5L10.5 4.375M10.5 4.375L16.625 10.5M10.5 4.375V16.625" stroke="currentColor" stroke-opacity="0.6" stroke-width="1.3125" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                <div class="bottom-id-hint">esc. to close</div>
                <div class="bottom-feedback-message" id="bottomFeedbackMessage"></div>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
    <script type="module">
        import { inject } from 'https://cdn.jsdelivr.net/npm/@vercel/analytics@1.5.0/dist/index.js';
        inject();
    </script>
</body>
</html>